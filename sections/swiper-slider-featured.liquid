<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'pickup-availability.js' | asset_url }}" defer="defer"></script>

{%- style -%}

.featured-slider-{{ section.id }}-padding{
	padding-top: {{ section.settings.padding_top | times: 1 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 1 | round: 0 }}px;
}

{%- endstyle -%}

{% stylesheet %}

#swiperSliderFeatured .container{
    max-width: 1440px;
}

#swiperSliderFeatured .swiper-wrapper{
	padding-top: 10px;
	padding-bottom: 10px;
}

#swiperSliderFeatured h2{
	font-family: 'Playfair Display', serif;
	font-weight: 600;
	font-size: 36px!important;
	letter-spacing: -0.43px;
	line-height: 36px;
	color: #111111;
    margin: 0;
	padding: 0 20px 0 20px;
}

@media (max-width: 767px){
  #swiperSliderFeatured h2{
      font-size: 30px!important;
      letter-spacing: -0.36px;
      line-height: 30px;
  }
}

#swiperSliderFeatured .swiper-slide{
	padding: 0 24px 0 24px;
}

@media (max-width: 767px){
  #swiperSliderFeatured .swiper-slide{
	padding: 0 12px 0 12px;
  }
}

#swiperSliderFeatured .swiper-slide a{
	text-decoration: none;
}

#swiperSliderFeatured .swiper-button-prev, #swiperSliderFeatured .swiper-button-next{
	background: #FFFFFF;
    -webkit-box-shadow: 2px 1px 4px 2px #0000001F; 
    box-shadow: 2px 1px 4px 2px #0000001F;
	border-radius: 25px;
	padding: 18px;
	width: 15px;
	height: 15px;
    margin-top: -9%;
    z-index: 1;
	position: absolute;
	display: block!important;
}

@media (max-width: 767px){
	#swiperSliderFeatured .swiper-button-prev, #swiperSliderFeatured .swiper-button-next{
		display: none!important;
	}
}

#swiperSliderFeatured .swiper-button-next{
	right: 40px!important;
}

#swiperSliderFeatured .swiper-button-prev{
	left: 40px!important;
}

#swiperSliderFeatured .swiper-button-prev:after, #swiperSliderFeatured .swiper-button-next:after {
    left: 15px!important;
    top: 12px!important;
    font-size: 12px!important;
    position: absolute!important;
    color: #b7b7b7!important;
}

#swiperSliderFeatured .slider_img_wrap{
    max-width: 330px;
    height: 430px;
	background-color: #fafafa;
	padding: 15px; 
	margin: 24px 0 24px 0;
}

@media (max-width: 767px){
  #swiperSliderFeatured .slider_img_wrap{
      max-width: 100%;
      height: 400px;
  }
}

#swiperSliderFeatured .slider_img_wrap img{
	width:100%; 
	height:100%;
	object-fit: contain;
}

#swiperSliderFeatured .product-tags{
	padding: 0;
    position: absolute;
    top: 37px;
    left: 33px;
}

#swiperSliderFeatured .product-tags li{
	font-family: 'Open Sans', sans-serif;
	font-weight: 600;
	font-size: 12px;
	line-height: 18px;
	letter-spacing: .29px;
    background: #BC0000;
 	list-style-type: none; 
    width: 52px;
    height: 24px;
    text-align: center;
}

#swiperSliderFeatured .product-tags li a{
    color: #ffffff!important;
    top: 3px;
    position: relative;
    text-transform: uppercase;
}

#swiperSliderFeatured .swiper-slide h3{
	font-family: 'Playfair Display', serif;
	font-weight: 400;
	color: #111111;
	font-size: 24px;
	line-height: 24px;
	letter-spacing: -0.29px;
}

@media (max-width: 767px){
  #swiperSliderFeatured .swiper-slide h3{
  	font-size: 18px;
	line-height: -22px;
	letter-spacing: 0.18px;
  }
}

#swiperSliderFeatured .product-desc{
	font-family: 'Open Sans', sans-serif;
	font-weight: 400;
	color: #4D4D4D;
	font-size: 12px;
	line-height: 18px;
	letter-spacing: 0.29px;
	margin: 12px 0 12px 0;

   overflow: hidden;
   text-overflow: ellipsis;
   display: -webkit-box;
   -webkit-line-clamp: 2;
           line-clamp: 2; 
   -webkit-box-orient: vertical;
}

#swiperSliderFeatured .product__tax{
	display: none!important;
}

#swiperSliderFeatured .price-item{
	font-family: 'Open Sans', sans-serif;
	font-size: 12px;
	line-height: 18px;
	letter-spacing: 0.29px;
	display: inline-block;
	margin-right: 5px;
	margin-bottom: 24px;
}

#swiperSliderFeatured .price__regular .price-item{
	font-weight: 600;
	color: #4D4D4D;
	display: flex;
}

#swiperSliderFeatured .price__sale .price-item--regular{
	font-weight: 400;
	color: #888888;
	display: flex;
}

#swiperSliderFeatured .price__sale .price-item--sale{
	font-weight: 600;
	color: #4D4D4D;
}

#swiperSliderFeatured .price--on-sale .price__sale{
	display: flex;
    flex-direction: row-reverse;
}

#swiperSliderFeatured .price--on-sale .price-item{
	display: flex;
}

#swiperSliderFeatured .product-form__buttons button{
    position: relative;
    display: block;
	width: 100%;
    background: #ffffff;
    height: 48px;
    border: 1px solid #111111;
 	box-shadow: none;
  	z-index: 1;
	transition: 0.15s ease-out;
}

#swiperSliderFeatured .product-form__buttons button:hover{
    background: #e3e2e2;
}

#swiperSliderFeatured .product-form__buttons button:before, #swiperSliderFeatured .product-form__buttons button:after{
    box-shadow: none;
    border: none;
}

#swiperSliderFeatured .product-form__buttons button:hover:before, #swiperSliderFeatured .product-form__buttons button:hover:after{
    box-shadow: none;
    border: none;
}

#swiperSliderFeatured .product-form__buttons{
	top: -45px;
    position: relative;
}

#swiperSliderFeatured .product-form__buttons:before{
    content: "";
    display: block;
    position: relative;
    left: 3px;
    top: 51px;
    width: 100%;
    height: 48px;
    background: #ffffff;
    border-bottom: 1px solid #111111;
    border-right: 1px solid #111111;
	z-index: 0;
}


#swiperSliderFeatured .product-form__buttons button span{
	font-family: 'Open Sans', sans-serif;
	font-weight: 600;
	font-size: 14px;
	line-height: 14px;
	letter-spacing: -0.17px;
	color: #111111;
}

{% endstylesheet %}

{% javascript %}

  var swiper = new Swiper(".mySwiper", {
        slidesPerView: 4,
 		loop: true,
		preventClicksPropagation: false,
		preventInteractionOnTransition: false,
		touchMoveStopPropagation: true,
		touchStartPreventDefault: true,
		touchStartForcePreventDefault: true,
   		navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
		},
   		breakpoints: {
			1299: {
                slidesPerView: 4,
            },
			1024: {
                slidesPerView: 3,
            },
          	768: {
                slidesPerView: 2,
            },
            0: {
               slidesPerView: 1.2,
            }
        }
  });

{% endjavascript %}


{%- liquid
  assign products_to_display = section.settings.collection.all_products_count

  if section.settings.collection.all_products_count > section.settings.products_to_show
    assign products_to_display = section.settings.products_to_show
    assign more_in_collection = true
  endif
-%}


{% if section.blocks.size > 0 %}
<section id="swiperSliderFeatured" class="featured-slider-{{ section.id }}-padding">
  <div class="container">
    <div class="row">

      <div class="col-12">
          <h2>{{ section.settings.slider_header_title }}</h2>
      </div>

      <div class="swiper mySwiper">

        <div class="swiper-wrapper">
        {% for block in section.blocks %}
             {%- for product in section.settings.collection.products limit: section.settings.products_to_show -%}
                 <div class="swiper-slide">

                     <a class="prod-link-wrapper" href="{{ product.url}}">
                        <div class="slider_img_wrap">
                            <img src="{{ product.featured_image | img_url: 'original' }}" class="slider_img">
							
                            <ul class="product-tags">
                              {% for tag in product.tags %}
                              <li><a href="/collections/all/{{ tag | handleize }}">{{ tag }}</a></li>
                              {% endfor %}
                            </ul>
                        </div>
    				 </a>

    				 <a class="prod-link-wrapper" href="{{ product.url}}">
                        <h3 class="slider_title"> {{ product.title }} </h3>

                        <p class="product-desc"> {{ product.description }} </p>
					 </a>

					<!-- Product Price -->
                     <div class="no-js-hidden" id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
                         {%- render 'price', product: product, use_variant: true, show_badges: false, price_class: 'price--large' -%}
                     </div>
                     {%- if shop.taxes_included or shop.shipping_policy.body != blank -%}
                         <div class="product__tax caption rte">
                            {%- if shop.taxes_included -%}
                               {{ 'products.product.include_taxes' | t }}
                            {%- endif -%}
                            {%- if shop.shipping_policy.body != blank -%}
                               {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
                            {%- endif -%}
                         </div>
                      {%- endif -%}
                      {%- if product != blank -%}
                         <div {{ block.shopify_attributes }}>
                            {%- form 'product', product -%}
                               <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                               {{ form | payment_terms }}
                            {%- endform -%}
                         </div>
                      {%- endif -%}

					  <!-- Add to cart -->
                      <div {{ block.shopify_attributes }}>
                        <product-form class="product-form">
                          <div class="product-form__error-message-wrapper" role="alert" hidden>
                            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-error" viewBox="0 0 13 13">
                              <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                              <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                              <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                              <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                            </svg>
                            <span class="product-form__error-message"></span>
                          </div>

                          {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
                            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
                            <div class="product-form__buttons">
                              <button
                                type="submit"
                                name="add"
                                class="product-form__submit button button--full-width {% if block.settings.show_dynamic_checkout and product.selling_plan_groups == empty %}button--secondary{% else %}button--primary{% endif %}"
                              {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
                              >
                                  <span>
                                    {%- if product.selected_or_first_available_variant.available -%}
                                      {{ 'products.product.add_to_cart' | t }}
                                    {%- else -%}
                                      {{ 'products.product.sold_out' | t }}
                                    {%- endif -%}
                                  </span>
                                  <div class="loading-overlay__spinner hidden">
                                    <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                                      <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                                    </svg>
                                  </div>
                              </button>
                              {%- if block.settings.show_dynamic_checkout -%}
                                {{ form | payment_button }}
                              {%- endif -%}
                            </div>
                          {%- endform -%}
                        </product-form>

                        {{ 'component-pickup-availability.css' | asset_url | stylesheet_tag }}

                        {%- assign pick_up_availabilities = product.selected_or_first_available_variant.store_availabilities | where: 'pick_up_enabled', true -%}

                        <pickup-availability class="product__pickup-availabilities no-js-hidden"
                          {% if product.selected_or_first_available_variant.available and pick_up_availabilities.size > 0 %} available{% endif %}
                          data-root-url="{{ routes.root_url }}"
                          data-variant-id="{{ product.selected_or_first_available_variant.id }}"
                          data-has-only-default-variant="{{ product.has_only_default_variant }}"
                        >
                          <template>
                            <pickup-availability-preview class="pickup-availability-preview">
                              {% render 'icon-unavailable' %}
                              <div class="pickup-availability-info">
                                <p class="caption-large">{{ 'products.product.pickup_availability.unavailable' | t }}</p>
                                <button class="pickup-availability-button link link--text underlined-link">{{ 'products.product.pickup_availability.refresh' | t }}</button>
                              </div>
                            </pickup-availability-preview>
                          </template>
                        </pickup-availability>
                    </div>
  					<!-- Add to cart END-->

               </div>

            {% endfor %}
        {% endfor %}
        </div>
        
        <div class="swiper-button-prev"> </div>
        <div class="swiper-button-next"> </div>
        
      </div>
    </div>
  </div>
</section>
{% endif %}


{% schema %}
{
"presets": [
    {
      "name": "Swiper Slider Featured"
    }
],
"name": "Swiper Slider Featured",
"max_blocks": 1,
"settings": [
  {
    "type":"header",
    "content":"Featured slider options"
  },
  {
    "type": "text",
    "id": "slider_header_title",
    "label": "Header Title"
  },
  {
    "type": "collection",
    "id": "collection",
    "label": "t:sections.featured-collection.settings.collection.label"
  },
  {
     "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
  },
  {
     "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
  }
],
"blocks": [
  {
  "type": "slide",
  "name": "Slide",
  "settings": [
        {
          "type": "text",
          "id": "slide_label",
          "label": "Slide label"
        }
      ]
    }
  ]
}
{% endschema %}